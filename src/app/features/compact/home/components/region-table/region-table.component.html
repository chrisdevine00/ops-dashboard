<div class="region-section">
  <h3 class="region-title">{{ region }}</h3>

  <mat-card class="region-card">
    <table mat-table [dataSource]="dataSource" matSort class="systems-table">
      <!-- Customer Name Column -->
      <ng-container matColumnDef="customerName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Customer Name</th>
        <td mat-cell *matCellDef="let system">{{ system.customerName }}</td>
      </ng-container>

      <!-- Serial Number Column -->
      <ng-container matColumnDef="serialNumber">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Serial Number</th>
        <td mat-cell *matCellDef="let system">
          <a [routerLink]="['/compact/system', system.serialNumber]" class="serial-link">
            {{ system.serialNumber }}
          </a>
        </td>
      </ng-container>

      <!-- Last Event Time Column -->
      <ng-container matColumnDef="lastEventTime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Event</th>
        <td mat-cell *matCellDef="let system">{{ formatDateTime(system.lastEventTime) }}</td>
      </ng-container>

      <!-- Last Alert Time Column -->
      <ng-container matColumnDef="lastAlertTime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Alert</th>
        <td mat-cell *matCellDef="let system" [class.no-alert]="!system.lastAlertTime">
          {{ formatDateTime(system.lastAlertTime) }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row
          *matRowDef="let row; columns: displayedColumns;"
          [routerLink]="['/compact/system', row.serialNumber]"
          class="clickable-row">
      </tr>
    </table>
  </mat-card>
</div>
